<div class="routes-list">

  <app-loading-overlay *ngIf="loading$ | async"></app-loading-overlay>

  <ng-container *ngIf="!(loading$ | async)">
    <table class="routes-list__table mat-elevation-z8" mat-table [dataSource]="routes$">

      <ng-container *ngFor="let column of columns">
        <ng-container matColumnDef="{{ column.key }}">
          <th mat-header-cell
              *matHeaderCellDef
              (click)="handleSortingClick(column.key)">
            <div class="routes-list__header-cell-content">
              {{ column.name }}
              <mat-icon *ngIf="sortedBy?.column === column.key">
                {{ sortedBy?.isDesc ? 'arrow_drop_down' : 'arrow_drop_up' }}
              </mat-icon>
            </div>
          </th>
          <td mat-cell *matCellDef="let element"> {{ element[column.key] }} </td>
        </ng-container>
      </ng-container>

      <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
      <tr mat-row *matRowDef="let row; columns: displayedColumns;"
          (click)="handleRowClick(row)">
      </tr>

    </table>
  </ng-container>
</div>
